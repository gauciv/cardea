# Oracle Backend Environment Configuration (2026)
# =========================================================

# Service Configuration
DEBUG=false
LOG_LEVEL=INFO
PORT=8000

# =============================================================================
# MICROSOFT ENTRA EXTERNAL ID CONFIGURATION
# =============================================================================
# Get these from: Azure Portal -> Microsoft Entra ID -> App Registrations

# Your Application (client) ID
AZURE_CLIENT_ID=PASTE_YOUR_CLIENT_ID_HERE

# Your Azure Tenant ID
AZURE_TENANT_ID=PASTE_YOUR_TENANT_ID_HERE

# Client Secret (from Azure Portal -> Certificates & secrets)
AZURE_CLIENT_SECRET=PASTE_YOUR_CLIENT_SECRET_HERE

# Authority URL (External ID tenant)
# Format: https://{tenant-name}.ciamlogin.com/
AZURE_AUTHORITY=https://YOUR_TENANT_NAME.ciamlogin.com/

# Token Validation Endpoints (External ID specific)
# CRITICAL: For External ID, use ciamlogin.com domain, NOT login.microsoftonline.com
# JWKS URI uses tenant name in subdomain: https://{tenant-name}.ciamlogin.com/{tenant-id}/discovery/v2.0/keys
AZURE_JWKS_URI=https://YOUR_TENANT_NAME.ciamlogin.com/PASTE_YOUR_TENANT_ID_HERE/discovery/v2.0/keys

# Token Issuer uses tenant ID as subdomain: https://{tenant-id}.ciamlogin.com/{tenant-id}/v2.0
# NOTE: ISSUER uses TENANT_ID in subdomain, not tenant name!
AZURE_TOKEN_ISSUER=https://PASTE_YOUR_TENANT_ID_HERE.ciamlogin.com/PASTE_YOUR_TENANT_ID_HERE/v2.0

# API Scope (Expose an API in Azure Portal)
AZURE_API_SCOPE=api://PASTE_YOUR_CLIENT_ID_HERE/access_as_user

# =============================================================================
# GOOGLE OAUTH 2.0 CONFIGURATION
# =============================================================================
# Get these from: Google Cloud Console -> APIs & Services -> Credentials

# Your Google OAuth 2.0 Client ID
GOOGLE_CLIENT_ID=PASTE_YOUR_GOOGLE_CLIENT_ID_HERE

# Your Google Client Secret
GOOGLE_CLIENT_SECRET=PASTE_YOUR_GOOGLE_CLIENT_SECRET_HERE

# Google Token Validation Endpoint
GOOGLE_TOKEN_INFO_URL=https://oauth2.googleapis.com/tokeninfo

# =============================================================================
# MICROSOFT ENTRA EXTERNAL ID - NATIVE AUTHENTICATION (OPTIONAL)
# =============================================================================
# For email OTP-based registration

# External ID Tenant Subdomain (the part before .ciamlogin.com)
AZURE_EXTERNAL_ID_TENANT_SUBDOMAIN=YOUR_TENANT_NAME

# External ID Tenant ID (same as AZURE_TENANT_ID)
AZURE_EXTERNAL_ID_TENANT_ID=PASTE_YOUR_TENANT_ID_HERE

# External ID Application (client) ID (same as AZURE_CLIENT_ID)
AZURE_EXTERNAL_ID_CLIENT_ID=PASTE_YOUR_CLIENT_ID_HERE

# External ID Client Secret (same as AZURE_CLIENT_SECRET)
AZURE_EXTERNAL_ID_CLIENT_SECRET=PASTE_YOUR_CLIENT_SECRET_HERE

# External ID Authority (auto-generated from subdomain)
AZURE_EXTERNAL_ID_AUTHORITY=https://YOUR_TENANT_NAME.ciamlogin.com/

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Connection String (for SQLAlchemy with asyncpg driver)
# Development: postgresql+asyncpg://oracle:your_password@localhost:5432/cardea_oracle
# Docker: postgresql+asyncpg://oracle:your_password@db:5432/cardea_oracle
DATABASE_URL=postgresql+asyncpg://oracle:your_password_here@localhost:5432/cardea_oracle

# Individual Database Connection Parameters
DB_HOST=localhost
DB_PORT=5432
DB_NAME=cardea_oracle
DB_USER=oracle
DB_PASSWORD=your_password_here

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Connection URL (for caching and session management)
REDIS_URL=redis://localhost:6379/0

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Secret Key (generate with: openssl rand -hex 32)
SECRET_KEY=generate_a_secure_random_string_here
ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# SENTRY INTEGRATION
# =============================================================================

# Sentry Webhook Token (for receiving alerts)
SENTRY_WEBHOOK_TOKEN=your_secure_webhook_token

# =============================================================================
# ALERT PROCESSING CONFIGURATION
# =============================================================================

# Alert Processing Safeguards
MAX_ALERTS_PER_BATCH=100
ALERT_RETENTION_DAYS=90
THREAT_SCORE_THRESHOLD=0.7
CORRELATION_WINDOW_MINUTES=60

# =============================================================================
# AZURE AI SERVICES (SWEDEN CENTRAL)
# =============================================================================

# Azure OpenAI Configuration
# Key from: az cognitiveservices account keys list
AZURE_OPENAI_API_KEY=PASTE_YOUR_KEY_HERE

# Endpoint from Terraform output
AZURE_OPENAI_ENDPOINT=https://cardea-openai-service.openai.azure.com/

# Deployment Name must match 'oracle-brain' from Terraform
AZURE_OPENAI_DEPLOYMENT=oracle-brain

# Latest stable API version for GPT-4o series
AZURE_OPENAI_API_VERSION=2024-10-21

# AI Agent Configuration
AI_ENABLED=true
AI_MODEL_TEMPERATURE=0.3
AI_MAX_TOKENS=150

# Azure AI Search (Sweden Central - Free Tier)
AZURE_SEARCH_ENDPOINT=https://cardea-threat-search.search.windows.net
AZURE_SEARCH_KEY=PASTE_SEARCH_ADMIN_KEY_HERE

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Cloud & Environment
CLOUD_PROVIDER=azure
ENVIRONMENT=development

# Frontend Dashboard URL (for CORS)
DASHBOARD_URL=http://localhost:5173

# Admin Account (for initial setup)
ADMIN_PASSWORD=change-this-admin-password-immediately